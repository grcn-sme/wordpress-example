<!-- for testing custom code injector logic -->
<!-- test the emulated loading sequence of page -->
<!-- all events should be logged and executed in order -->

<!-- head -->
<script>
    console.warn('head code', '0 inline', { 'expected load sequence': 0, 'document.readyState': document.readyState });
    setTimeout(_ => {
        console.warn('head code', '2 : setTimeout 0s', { 'expected load sequence': 2, 'document.readyState': document.readyState });
    }, 0);
    setTimeout(_ => {
        console.warn('head code', 'setTimeout 4s', { 'expected load sequence': 'last +4sec', 'document.readyState': document.readyState });
    }, 4000);

    window.addEventListener('load', function (ev) {
        console.warn('head code', ev.type, { 'expected load sequence': 6, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('readystatechange', function (ev) {
        console.warn('head code', ev.type, { 'expected load sequence': 4, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('DOMContentLoaded', function (ev) {
        console.warn('head code', ev.type, { 'expected load sequence': 5, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('pageshow', function (ev) {
        console.warn('head code', ev.type, { 'expected load sequence': 'last', 'document.readyState': document.readyState, ev: ev });
    });

    console.warn('head code', '1 inline', { 'expected load sequence': 1, 'document.readyState': document.readyState });
    setTimeout(_ => {
        console.warn('head code', '3 : setTimeout 0s', { 'expected load sequence': 3, 'document.readyState': document.readyState });
    }, 0);
</script>


<!-- /body -->
<script>
    console.log('body code', '0 inline', { 'expected load sequence': 0, 'document.readyState': document.readyState });
    setTimeout(_ => {
        console.log('body code', '2 : setTimeout 0s', { 'expected load sequence': 2, 'document.readyState': document.readyState });
    }, 0);
    setTimeout(_ => {
        console.log('body code', 'setTimeout 4s', { 'expected load sequence': 'last +4sec', 'document.readyState': document.readyState });
    }, 4000);

    window.addEventListener('load', function (ev) {
        console.log('body code', ev.type, { 'expected load sequence': 6, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('readystatechange', function (ev) {
        console.log('body code', ev.type, { 'expected load sequence': 4, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('DOMContentLoaded', function (ev) {
        console.log('body code', ev.type, { 'expected load sequence': 5, 'document.readyState': document.readyState, ev: ev });
    });
    window.addEventListener('pageshow', function (ev) {
        console.log('body code', ev.type, { 'expected load sequence': 'last', 'document.readyState': document.readyState, ev: ev });
    });

    console.log('body code', '1 inline', { 'expected load sequence': 1, 'document.readyState': document.readyState });
    setTimeout(_ => {
        console.log('body code', '3 : setTimeout 0s', { 'expected load sequence': 3, 'document.readyState': document.readyState });
    }, 0);
</script>